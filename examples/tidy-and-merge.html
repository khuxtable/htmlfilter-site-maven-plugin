<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">












<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>HTML Filter Site Maven Plugin - Tidy and Merge Example</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
      @import url("../css/highlight.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <div id="page">
    <div id="banner">
                  <a href="../../../" id="bannerLeft"  >
    
                                            <img src="../../../../imagedir/kathrynhuxtable.org.gif" alt="kathrynhuxtable.org" />
    
            </a>
                          <div id="bannerRight">
    
                                            <img src="../images/HTMLFilterSiteLogo.png" alt="HTML Filter Site Maven Plugin" />
    
            </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
            
  
    
            <div class="xleft">
        Version: 0.3.2-SNAPSHOT
              </div>
            <div class="xright">            <a href="../../../../blog/projects/">Kathryn Huxtable's Projects</a>
            |
                <a href="http://www.kathrynhuxtable.org" class="externalLink">kathrynhuxtable.org</a>
            
  

  
    
            
  
    
  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
            
  
    
                   <h5>HTML Filter Site Maven Plugin</h5>
            <ul>
              
    <li>
                    <a href="../index.html">Introduction</a>
          </li>
              
    <li>
                    <a href="../plugin-info.html">Goals</a>
          </li>
              
    <li>
                    <a href="../usage.html">Usage</a>
          </li>
              
    <li>
                    <a href="../faq.html">FAQ</a>
          </li>
          </ul>
              <h5>Examples</h5>
            <ul>
              
    <li>
                    <a href="../examples/merge.html">Merge Example</a>
          </li>
              
    <li>
                    <a href="../examples/tidy.html">Tidy Example</a>
          </li>
              
    <li>
              <strong>Tidy and Merge Example</strong>
        </li>
              
    <li>
                    <a href="../examples/velocity-template.html">Velocity Template Example</a>
          </li>
          </ul>
              <h5>Project Information</h5>
            <ul>
              
    <li>
                    <a href="../dependencies.html">Dependencies</a>
          </li>
              
    <li>
                    <a href="../issue-tracking.html">Issue Tracking</a>
          </li>
              
    <li>
                    <a href="../mail-lists.html">Mailing Lists</a>
          </li>
              
    <li>
                    <a href="../plugin-management.html">Plugin Management</a>
          </li>
              
    <li>
                    <a href="../license.html">Project License</a>
          </li>
              
    <li>
                    <a href="../plugins.html">Project Plugins</a>
          </li>
              
    <li>
                    <a href="../project-summary.html">Project Summary</a>
          </li>
              
    <li>
                    <a href="../team-list.html">Project Team</a>
          </li>
              
    <li>
                    <a href="../source-repository.html">Source Repository</a>
          </li>
          </ul>
              <h5>Project Reports</h5>
            <ul>
              
    <li>
                    <a href="../cpd.html">CPD Report</a>
          </li>
              
    <li>
                    <a class="newWindow" target="_New" href="../apidocs/index.html">JavaDocs</a>
          </li>
              
    <li>
                    <a href="../pmd.html">PMD Report</a>
          </li>
              
    <li>
                    <a class="newWindow" target="_New" href="../xref/index.html">Source Xref</a>
          </li>
              
    <li>
                    <a href="../taglist.html">Tag List</a>
          </li>
          </ul>
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div xmlns="http://www.w3.org/1999/xhtml" class="article" lang="en">
  <div class="section" lang="en">
    <div class="titlepage">
      <div>
        <div>
          <h1 class="title"><a id="d49e17" name="d49e17" shape="rect"></a>Tidy and Merge Example using the
              docbkx plugin</h1>
        </div>
      </div>
    </div>
    <p>The main purpose for which this plugin was written was
        to process the HTML output of the docbkx maven plugin to
        make it fit with the Doxia-generated reports without losing
        the DocBook formatting.</p>
    <p>The following is a complete example of using the docbkx
        maven plugin to produce HTML output from DocBook source,
        then using the HTML Filter Site Maven plugin to tidy the
        results since docbkx 2.0.9 produces HTML instead of XHTML,
        and then merging all the files with a Velocity site
        template to produce documentation that looks like the Doxia
        reports produced by the site plugin.</p>
    <pre class="programlisting" xml:space="preserve">
&lt;<span class="hl-tag">project</span>&gt;
  ...
  &lt;<span class="hl-tag">build</span>&gt;
     &lt;<span class="hl-tag">pluginManagement</span>&gt;
     &lt;<span class="hl-tag">plugins</span>&gt;
      &lt;<span class="hl-tag">plugin</span>&gt;
       &lt;<span class="hl-tag">groupId</span>&gt;org.kathrynhuxtable.maven.plugins&lt;<span class="hl-tag">/groupId</span>&gt;
       &lt;<span class="hl-tag">artifactId</span>&gt;htmlfilter-site-maven-plugin&lt;<span class="hl-tag">/artifactId</span>&gt;
       &lt;<span class="hl-tag">version</span>&gt;0.3.2-SNAPSHOT&lt;<span class="hl-tag">/version</span>&gt;
      &lt;<span class="hl-tag">/plugin</span>&gt;
     &lt;<span class="hl-tag">/plugins</span>&gt;
    &lt;<span class="hl-tag">/pluginManagement</span>&gt;
    ...
    &lt;<span class="hl-tag">plugins</span>&gt;
      ...
     &lt;<span class="hl-tag">plugin</span>&gt;
      &lt;<span class="hl-tag">groupId</span>&gt;com.agilejava.docbkx&lt;<span class="hl-tag">/groupId</span>&gt;
      &lt;<span class="hl-tag">artifactId</span>&gt;docbkx-maven-plugin&lt;<span class="hl-tag">/artifactId</span>&gt;
      &lt;<span class="hl-tag">version</span>&gt;2.0.9&lt;<span class="hl-tag">/version</span>&gt;
      &lt;<span class="hl-tag">executions</span>&gt;
       &lt;<span class="hl-tag">execution</span>&gt;
        &lt;<span class="hl-tag">goals</span>&gt;
         &lt;<span class="hl-tag">goal</span>&gt;generate-html&lt;<span class="hl-tag">/goal</span>&gt;
        &lt;<span class="hl-tag">/goals</span>&gt;
        &lt;<span class="hl-tag">phase</span>&gt;pre-site&lt;<span class="hl-tag">/phase</span>&gt;
       &lt;<span class="hl-tag">/execution</span>&gt;
      &lt;<span class="hl-tag">/executions</span>&gt;
      &lt;<span class="hl-tag">dependencies</span>&gt;
       &lt;<span class="hl-tag">dependency</span>&gt;
        &lt;<span class="hl-tag">groupId</span>&gt;net.sf.docbook&lt;<span class="hl-tag">/groupId</span>&gt;
        &lt;<span class="hl-tag">artifactId</span>&gt;docbook-xml&lt;<span class="hl-tag">/artifactId</span>&gt;
        &lt;<span class="hl-tag">version</span>&gt;5.0-all&lt;<span class="hl-tag">/version</span>&gt;
        &lt;<span class="hl-tag">classifier</span>&gt;resources&lt;<span class="hl-tag">/classifier</span>&gt;
        &lt;<span class="hl-tag">type</span>&gt;zip&lt;<span class="hl-tag">/type</span>&gt;
        &lt;<span class="hl-tag">scope</span>&gt;runtime&lt;<span class="hl-tag">/scope</span>&gt;
       &lt;<span class="hl-tag">/dependency</span>&gt;
      &lt;<span class="hl-tag">/dependencies</span>&gt;
      &lt;<span class="hl-tag">configuration</span>&gt;
       &lt;<span class="hl-tag">chunkedOutput</span>&gt;false&lt;<span class="hl-tag">/chunkedOutput</span>&gt;
       &lt;<span class="hl-tag">sourceDirectory</span>&gt;${basedir}/src/site/docbook&lt;<span class="hl-tag">/sourceDirectory</span>&gt;
       &lt;<span class="hl-tag">includes</span>&gt;**/*.xml,**/*.xml.vm&lt;<span class="hl-tag">/includes</span>&gt;
       &lt;<span class="hl-tag">targetDirectory</span>&gt;${project.build.directory}/generated-site/html&lt;<span class="hl-tag">/targetDirectory</span>&gt;
       &lt;<span class="hl-tag">generateMetaAbstract</span>&gt;0&lt;<span class="hl-tag">/generateMetaAbstract</span>&gt;
       &lt;<span class="hl-tag">highlightSource</span>&gt;1&lt;<span class="hl-tag">/highlightSource</span>&gt;
       &lt;<span class="hl-tag">highlightDefaultLanguage</span> /&gt;
       &lt;<span class="hl-tag">htmlCustomization</span>&gt;${basedir}/src/site/xsl/html.xsl&lt;<span class="hl-tag">/htmlCustomization</span>&gt;
       &lt;<span class="hl-tag">imgSrcPath</span>&gt;./&lt;<span class="hl-tag">/imgSrcPath</span>&gt;
       &lt;<span class="hl-tag">htmlCellSpacing</span>&gt;2&lt;<span class="hl-tag">/htmlCellSpacing</span>&gt;
       &lt;<span class="hl-tag">htmlCellPadding</span>&gt;2&lt;<span class="hl-tag">/htmlCellPadding</span>&gt;
       &lt;<span class="hl-tag">suppressHeaderNavigation</span>&gt;1&lt;<span class="hl-tag">/suppressHeaderNavigation</span>&gt;
       &lt;<span class="hl-tag">suppressFooterNavigation</span>&gt;1&lt;<span class="hl-tag">/suppressFooterNavigation</span>&gt;
       &lt;<span class="hl-tag">tableBordersWithCss</span>&gt;true&lt;<span class="hl-tag">/tableBordersWithCss</span>&gt;
       &lt;<span class="hl-tag">tableFrameBorderThickness</span>&gt;0&lt;<span class="hl-tag">/tableFrameBorderThickness</span>&gt;
       &lt;<span class="hl-tag">tableCellBorderThickness</span>&gt;0&lt;<span class="hl-tag">/tableCellBorderThickness</span>&gt;
       &lt;<span class="hl-tag">targetFileExtension</span>&gt;html&lt;<span class="hl-tag">/targetFileExtension</span>&gt;
       &lt;<span class="hl-comment">!-- use extensions --</span>&gt;
       &lt;<span class="hl-tag">useExtensions</span>&gt;1&lt;<span class="hl-tag">/useExtensions</span>&gt;
       &lt;<span class="hl-comment">!-- callouts --</span>&gt;
       &lt;<span class="hl-tag">calloutsExtension</span>&gt;1&lt;<span class="hl-tag">/calloutsExtension</span>&gt;
      &lt;<span class="hl-tag">/configuration</span>&gt;
     &lt;<span class="hl-tag">/plugin</span>&gt;
      &lt;<span class="hl-tag">plugin</span>&gt;
        &lt;<span class="hl-tag">groupId</span>&gt;org.kathrynhuxtable.maven.plugins&lt;<span class="hl-tag">/groupId</span>&gt;
        &lt;<span class="hl-tag">artifactId</span>&gt;htmlfilter-site-maven-plugin&lt;<span class="hl-tag">/artifactId</span>&gt;
        &lt;<span class="hl-tag">version</span>&gt;0.3.2-SNAPSHOT&lt;<span class="hl-tag">/version</span>&gt;
        &lt;<span class="hl-tag">executions</span>&gt;
          &lt;<span class="hl-tag">execution</span>&gt;
            &lt;<span class="hl-tag">goals</span>&gt;
              &lt;<span class="hl-tag">goal</span>&gt;tidy&lt;<span class="hl-tag">/goal</span>&gt;
               &lt;<span class="hl-tag">goal</span>&gt;merge&lt;<span class="hl-tag">/goal</span>&gt;
           &lt;<span class="hl-tag">/goals</span>&gt;
            &lt;<span class="hl-tag">phase</span>&gt;pre-site&lt;<span class="hl-tag">/phase</span>&gt;
          &lt;<span class="hl-tag">/execution</span>&gt;
        &lt;<span class="hl-tag">/executions</span>&gt;
        &lt;<span class="hl-tag">configuration</span>&gt;
         &lt;<span class="hl-comment">!--
             Note that docbkx removes the last four characters of the filename, presumably ".xml",
             and replaces them with ".html". If the file ends in ".xml.vm" instead, we get ".xm.html".
         --</span>&gt;
         &lt;<span class="hl-tag">tidySourceDirectory</span>&gt;${project.build.directory}/generated-site/html&lt;<span class="hl-tag">/tidySourceDirectory</span>&gt;
         &lt;<span class="hl-tag">tidyTargetDirectory</span>&gt;${project.build.directory}/generated-site/tidy&lt;<span class="hl-tag">/tidyTargetDirectory</span>&gt;
         &lt;<span class="hl-tag">tidyFilePattern</span>&gt;**/*.html,**/*.xm.html&lt;<span class="hl-tag">/tidyFilePattern</span>&gt;

         &lt;<span class="hl-tag">sourceDirectory</span>&gt;${project.build.directory}/generated-site/tidy&lt;<span class="hl-tag">/sourceDirectory</span>&gt;
         &lt;<span class="hl-tag">filePattern</span>&gt;**/*.html,**/*.xm.html&lt;<span class="hl-tag">/filePattern</span>&gt;
         &lt;<span class="hl-tag">filterExtension</span>&gt;.xm.html&lt;<span class="hl-tag">/filterExtension</span>&gt;
         &lt;<span class="hl-tag">targetDirectory</span>&gt;${project.build.directory}/generated-site/resources&lt;<span class="hl-tag">/targetDirectory</span>&gt;
        &lt;<span class="hl-tag">/configuration</span>&gt;
      &lt;<span class="hl-tag">/plugin</span>&gt;
      ...
    &lt;<span class="hl-tag">/plugins</span>&gt;
    ...
  &lt;<span class="hl-tag">/build</span>&gt;
  ...
&lt;<span class="hl-tag">/project</span>&gt;
</pre>
  </div>
</div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xleft">
        &#169;  
          2010
    
          kathrynhuxtable.org
          
  

  
    
            
  
    
              
  

  
    
            
  
    
            <div id="lastPublished">
        Last Published: 28 Mar 2010
              </div>
            </div>
      <div class="xright">                              <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img class="poweredBy" 
                 alt="Built by Maven" 
                 src="../images/logos/maven-feather.png" 
                 width="90"
                 height="30"
                 border="1" />
          </a>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    </div>
  </body>
</html>